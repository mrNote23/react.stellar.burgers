{"version":3,"file":"static/js/13.d7bd13e9.chunk.js","mappings":"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","sources":["hooks/use-form.ts","pages/auth-pages/page-reset-password/page-reset-password.tsx"],"sourcesContent":["import { ChangeEvent, useEffect, useState } from \"react\";\n\nexport const useForm = <T>(initialFields: T) => {\n  const [form, setForm] = useState<T>(initialFields);\n  const [modified, setModified] = useState<boolean>(false);\n\n  useEffect(() => {\n    setModified(JSON.stringify(form) !== JSON.stringify(initialFields));\n  }, [form, initialFields]);\n\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const resetForm = () => {\n    setForm(initialFields);\n  };\n\n  return { form, setForm, onChange, resetForm, modified };\n};\n","import Api from \"@utils/api\";\nimport { FormEvent, Fragment, useState } from \"react\";\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\nimport { useForm } from \"@hooks/use-form\";\nimport { useAppSelector } from \"@store/store\";\nimport { deleteCookie, getCookie } from \"@utils/cookie\";\nimport { PATH, RESET_PASSWORD_COOKIE_NAME } from \"@config/constants\";\n\nconst PageResetPassword = () => {\n  const { authorized } = useAppSelector((store) => store.user);\n  const { form, onChange, resetForm } = useForm({\n    token: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const navigate = useNavigate();\n\n  const onSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    Api.userSetPassword(form.token, form.password)\n      .then(() => {\n        setLoading(false);\n        deleteCookie(RESET_PASSWORD_COOKIE_NAME);\n        navigate(PATH.LOGIN, { replace: true });\n      })\n      .catch((err) => {\n        setLoading(false);\n        setError(err);\n        resetForm();\n      });\n  };\n\n  return (\n    <Fragment>\n      {authorized || !getCookie(RESET_PASSWORD_COOKIE_NAME) ? (\n        <Navigate to={PATH.HOME} />\n      ) : (\n        <form\n          className=\"d-flex items-center justify-center direction-column w-100\"\n          onSubmit={onSubmit}\n        >\n          <p className=\"text text_type_main-medium m-5\">\n            Восстановление пароля\n          </p>\n          {error && (\n            <p className=\"text text_type_main-default text_color_error m-3\">\n              {error}\n            </p>\n          )}\n          <PasswordInput\n            extraClass=\"m-5\"\n            placeholder=\"Введите новый пароль\"\n            name=\"password\"\n            value={form.password}\n            onChange={onChange}\n          />\n          <Input\n            extraClass=\"mb-5\"\n            placeholder=\"Введите код из письма\"\n            name=\"token\"\n            value={form.token}\n            onChange={onChange}\n            autoFocus\n          />\n          <Button\n            htmlType=\"submit\"\n            type=\"primary\"\n            size=\"medium\"\n            disabled={loading}\n          >\n            Сохранить\n          </Button>\n\n          <p className=\"text text_type_main-default text_color_inactive mt-15\">\n            Вспомнили пароль?&nbsp;\n            <Link to={PATH.LOGIN}>Войти</Link>\n          </p>\n        </form>\n      )}\n    </Fragment>\n  );\n};\n\nexport default PageResetPassword;\n"],"names":["useForm","initialFields","_useState","useState","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","modified","setModified","useEffect","JSON","stringify","onChange","e","_e$target","target","name","value","prev","_objectSpread","_defineProperty","resetForm","authorized","useAppSelector","store","user","_useForm","token","password","error","setError","loading","setLoading","navigate","useNavigate","_jsx","Fragment","children","getCookie","RESET_PASSWORD_COOKIE_NAME","Navigate","to","PATH","_jsxs","className","onSubmit","preventDefault","Api","then","deleteCookie","replace","catch","err","PasswordInput","extraClass","placeholder","Input","autoFocus","Button","htmlType","type","size","disabled","Link"],"sourceRoot":""}