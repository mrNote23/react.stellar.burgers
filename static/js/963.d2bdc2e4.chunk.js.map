{"version":3,"file":"static/js/963.d2bdc2e4.chunk.js","mappings":"+MAEaA,EAAU,SAAIC,GACzB,IAAAC,GAAwBC,EAAAA,EAAAA,UAAYF,GAAcG,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3CI,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GACpBI,GAAgCL,EAAAA,EAAAA,WAAkB,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAjDE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,IAE5BG,EAAAA,EAAAA,YAAU,WACRD,EAAYE,KAAKC,UAAUR,KAAUO,KAAKC,UAAUb,GACtD,GAAG,CAACK,EAAML,IAWV,MAAO,CAAEK,KAAAA,EAAMC,QAAAA,EAASQ,SATP,SAACC,GAChB,IAAAC,EAAwBD,EAAEE,OAAlBC,EAAIF,EAAJE,KAAMC,EAAKH,EAALG,MACdb,GAAQ,SAACc,GAAI,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWD,GAAI,IAAAE,EAAAA,EAAAA,GAAA,GAAGJ,EAAOC,GAAK,GAC7C,EAMkCI,UAJhB,WAChBjB,EAAQN,EACV,EAE6CS,SAAAA,EAC/C,C,yHCuEA,UA9EkB,WAChB,IAAAe,GAAsCzB,EAAAA,EAAAA,GAAQ,CAAE0B,MAAO,GAAIC,SAAU,KAA7DrB,EAAImB,EAAJnB,KAAMS,EAAQU,EAARV,SAAUS,EAASC,EAATD,UAClBI,GAAWC,EAAAA,EAAAA,MAEjBC,GAA2CC,EAAAA,EAAAA,KACzC,SAACC,GAAK,OAAKA,EAAMC,IAAI,IADfC,EAAWJ,EAAXI,YAAaC,EAAUL,EAAVK,WAAYC,EAAKN,EAALM,MAI3BC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAEjB5B,EAAAA,EAAAA,YAAU,WACR,OAAO,WACLgB,GAASa,EAAAA,EAAAA,MACX,CACF,GAAG,CAACb,KAEJhB,EAAAA,EAAAA,YAAU,WACR,IAAM8B,EAAcH,EAASI,OAASJ,EAASI,MAAMC,UAAa,IAC9DT,GACFE,EAASK,EAAY,CAAEG,SAAS,EAAMF,MAAO,OAEjC,KAAVP,GACFZ,GAEJ,GAAG,CAACY,EAAOD,IAOX,OACEW,EAAAA,EAAAA,KAACC,EAAAA,SAAQ,CAAAC,UACPC,EAAAA,EAAAA,MAAA,QACEC,UAAU,4DACVC,SATW,SAACnC,GAChBA,EAAEoC,iBACFxB,GAASyB,EAAAA,EAAAA,IAAU/C,GACrB,EAMyB0C,SAAA,EAEnBF,EAAAA,EAAAA,KAAA,KAAGI,UAAU,iCAAgCF,SAAC,6BAC7CZ,IACCU,EAAAA,EAAAA,KAAA,KAAGI,UAAU,mDAAkDF,SAC5DZ,KAGLU,EAAAA,EAAAA,KAACQ,EAAAA,GAAU,CACTnC,KAAK,QACLC,MAAOd,EAAKoB,MACZX,SAAUA,EACVwC,WAAS,KAEXT,EAAAA,EAAAA,KAACU,EAAAA,GAAa,CACZC,WAAW,MACXtC,KAAK,WACLC,MAAOd,EAAKqB,SACZZ,SAAUA,KAEZ+B,EAAAA,EAAAA,KAACY,EAAAA,GAAM,CACLC,SAAS,SACTC,KAAK,UACLC,KAAK,SACLC,SAAU5B,EAAYc,SACvB,oCAIDC,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wDAAuDF,SAAA,CAAC,+HAEnEF,EAAAA,EAAAA,KAACiB,EAAAA,GAAI,CAACC,GAAIC,EAAAA,GAAAA,SAAcjB,SAAC,qHAE3BC,EAAAA,EAAAA,MAAA,KAAGC,UAAU,uDAAsDF,SAAA,CAAC,kFAElEF,EAAAA,EAAAA,KAACiB,EAAAA,GAAI,CAACC,GAAIC,EAAAA,GAAAA,gBAAqBjB,SAAC,yHAK1C,C","sources":["hooks/use-form.ts","pages/auth-pages/page-login/page-login.tsx"],"sourcesContent":["import { ChangeEvent, useEffect, useState } from \"react\";\n\nexport const useForm = <T>(initialFields: T) => {\n  const [form, setForm] = useState<T>(initialFields);\n  const [modified, setModified] = useState<boolean>(false);\n\n  useEffect(() => {\n    setModified(JSON.stringify(form) !== JSON.stringify(initialFields));\n  }, [form, initialFields]);\n\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const resetForm = () => {\n    setForm(initialFields);\n  };\n\n  return { form, setForm, onChange, resetForm, modified };\n};\n","import { FormEvent, Fragment, useEffect } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport {\n  Button,\n  EmailInput,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { useForm } from \"@hooks/use-form\";\nimport { resetError, userLogin } from \"@store/reducers/user-reducer\";\nimport { useAppDispatch, useAppSelector } from \"@store/store\";\nimport { PATH } from \"@config/constants\";\n\nconst PageLogin = () => {\n  const { form, onChange, resetForm } = useForm({ email: \"\", password: \"\" });\n  const dispatch = useAppDispatch();\n\n  const { userLoading, authorized, error } = useAppSelector(\n    (store) => store.user\n  );\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    return () => {\n      dispatch(resetError());\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    const returnPath = (location.state && location.state.redirect) || \"/\";\n    if (authorized) {\n      navigate(returnPath, { replace: true, state: null });\n    }\n    if (error !== \"\") {\n      resetForm();\n    }\n  }, [error, authorized]);\n\n  const onSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    dispatch(userLogin(form));\n  };\n\n  return (\n    <Fragment>\n      <form\n        className=\"d-flex items-center justify-center direction-column w-100\"\n        onSubmit={onSubmit}\n      >\n        <p className=\"text text_type_main-medium m-5\">Вход</p>\n        {error && (\n          <p className=\"text text_type_main-default text_color_error m-3\">\n            {error}\n          </p>\n        )}\n        <EmailInput\n          name=\"email\"\n          value={form.email}\n          onChange={onChange}\n          autoFocus\n        />\n        <PasswordInput\n          extraClass=\"m-5\"\n          name=\"password\"\n          value={form.password}\n          onChange={onChange}\n        />\n        <Button\n          htmlType=\"submit\"\n          type=\"primary\"\n          size=\"medium\"\n          disabled={userLoading}\n        >\n          Войти\n        </Button>\n\n        <p className=\"text text_type_main-default text_color_inactive mt-15\">\n          Вы - новый пользователь?&nbsp;\n          <Link to={PATH.REGISTER}>Зарегистрироваться</Link>\n        </p>\n        <p className=\"text text_type_main-default text_color_inactive mt-5\">\n          Забыли пароль?&nbsp;\n          <Link to={PATH.FORGOT_PASSWORD}>Восстановить пароль</Link>\n        </p>\n      </form>\n    </Fragment>\n  );\n};\n\nexport default PageLogin;\n"],"names":["useForm","initialFields","_useState","useState","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","modified","setModified","useEffect","JSON","stringify","onChange","e","_e$target","target","name","value","prev","_objectSpread","_defineProperty","resetForm","_useForm","email","password","dispatch","useAppDispatch","_useAppSelector","useAppSelector","store","user","userLoading","authorized","error","navigate","useNavigate","location","useLocation","resetError","returnPath","state","redirect","replace","_jsx","Fragment","children","_jsxs","className","onSubmit","preventDefault","userLogin","EmailInput","autoFocus","PasswordInput","extraClass","Button","htmlType","type","size","disabled","Link","to","PATH"],"sourceRoot":""}